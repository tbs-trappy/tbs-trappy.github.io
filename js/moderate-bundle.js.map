{"version":3,"sources":["webpack:///webpack/bootstrap d4d73db792571f41dfe4?088f","webpack:///./src/js/moderate.js","webpack:///./~/debounce/index.js?61bb","webpack:///./src/js/CommonControls.js"],"names":["require","window","shared","opener","onParentWindowResize","e","scale","parseInt","getComputedStyle","document","querySelector","height","innerHeight","previewIframeEl","style","width","innerWidth","transform","toString","addEventListener","pubsub","emit","bind","target","matches","comments","id","closest","dataset","commentId","update","priority","deleted","preventDefault","insert","Date","created","name","elements","value","message","submit","focus","config","autoRefresh","refresh","postTitleEl","post","textContent","title","classList","tableBodyEl","firstChild","removeChild","order","each","comment","commentFrag","cloneNode","content","className","appendChild","importNode","on","module","exports","key","zoom","flipHorizontal","flipVertical"],"mappings":"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","file":"moderate-bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap d4d73db792571f41dfe4","/**\r\n * Copyright 2018-present, Facebook, Inc.\r\n * All rights reserved.\r\n *\r\n * This source code is licensed under the license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n */\r\n\r\nimport debounce from 'debounce';\r\nrequire('./CommonControls')(window);\r\n\r\n// Import shared objects from parent\r\nwindow.shared = window.opener.shared;\r\n\r\n// Set the teleprompter preview to the exact scale and aspect ratio as the actual\r\n// teleprompter, so as to display its layout identically.\r\nfunction onParentWindowResize(e) {\r\n  const scale =\r\n    parseInt(\r\n      window.getComputedStyle(\r\n        document.querySelector('.preview')\r\n      ).height\r\n    ) / window.opener.innerHeight;\r\n  const previewIframeEl = document.querySelector('.preview iframe');\r\n  previewIframeEl.style.width = window.opener.innerWidth + 'px';\r\n  previewIframeEl.style.height = window.opener.innerHeight + 'px';\r\n  previewIframeEl.style.transform = 'scale(' + scale.toString() + ')';\r\n  document.querySelector('.preview').style.width = (window.opener.innerWidth * scale) + 'px';\r\n}\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n  window.opener.addEventListener('resize', debounce(onParentWindowResize, 100));\r\n  onParentWindowResize();\r\n\r\n  document.querySelector('[data-action=\"refreshTeleprompters\"]').addEventListener(\r\n    'click',\r\n    window.shared.pubsub.emit.bind(window.shared.pubsub, 'teleprompterRefresh')\r\n  );\r\n  \r\n  document.querySelector('[data-content=\"comments\"] table').addEventListener('click', (e) => {\r\n    switch (true){\r\n    case e.target.matches('[data-action=\"prioritize\"]'):\r\n      window.shared.comments({\r\n        id: e.target.closest('[data-comment-id]').dataset.commentId\r\n      }).update(function () {\r\n        this.priority++;\r\n        return this;\r\n      });\r\n      break;\r\n      \r\n    case e.target.matches('[data-action=\"delete\"]'):\r\n      window.shared.comments({\r\n        id: e.target.closest('[data-comment-id]').dataset.commentId\r\n      }).update({\r\n        deleted: true\r\n      });\r\n      break;\r\n    }\r\n  });\r\n  \r\n  document.querySelector('form[name=\"newComment\"]').addEventListener('submit', (e) => {\r\n    e.preventDefault();\r\n    window.shared.comments.insert({\r\n      id: 'ZZZZZ' + (new Date()-0),\r\n      created: new Date(),\r\n      name: e.target.elements.name.value,\r\n      message: e.target.elements.message.value,\r\n      priority: parseInt(e.target.elements.submit.dataset.priority),\r\n      deleted: false\r\n    });\r\n    e.target.elements.name.value = '';\r\n    e.target.elements.message.value = '';\r\n    e.target.elements.name.focus();\r\n  });\r\n\r\n  document.querySelector('[data-action=\"toggleAutoRefresh\"]').addEventListener('click', (e) => {\r\n    window.shared.config.autoRefresh = !window.shared.config.autoRefresh;\r\n    window.shared.pubsub.emit('teleprompterRefresh');\r\n  });\r\n});\r\n\r\nconst refresh = debounce(() => {\r\n  // Post Title\r\n  const postTitleEl = document.querySelector('[data-content=\"postTitle\"]');\r\n  if (!window.shared.post) {\r\n    postTitleEl.textContent = '';\r\n    return;\r\n  }\r\n  postTitleEl.textContent = window.shared.post.title;\r\n  \r\n  // Auto-Refresh Controls\r\n  document.querySelector('[data-action=\"toggleAutoRefresh\"]').classList[window.shared.config.autoRefresh ? 'add' : 'remove']('active');\r\n  \r\n  // Comments\r\n  const tableBodyEl = document.querySelector('[data-content=\"comments\"] table tbody');\r\n  while (tableBodyEl.firstChild) {\r\n    tableBodyEl.removeChild(tableBodyEl.firstChild);\r\n  }\r\n  window.shared.comments({\r\n    deleted: false\r\n  }).order('priority desc, created desc').each((comment) => {\r\n    const commentFrag = document.querySelector('template#commentRow').cloneNode(true);\r\n    commentFrag.content.querySelector('[data-column=\"name\"]').textContent = comment.name || '';\r\n    commentFrag.content.querySelector('[data-column=\"message\"]').textContent = comment.message || '';\r\n    if (comment.priority) {\r\n      commentFrag.content.querySelector('[data-action=\"prioritize\"]').className += ' active';\r\n    }\r\n    commentFrag.content.querySelector('tr').dataset.commentId = comment.id;\r\n    tableBodyEl.appendChild(document.importNode(commentFrag.content, true));\r\n  });\r\n}, 200);\r\n\r\n// When pretty much anything happens, refresh (common-debounced) the moderator view\r\nwindow.shared.pubsub.on('teleprompterRefresh', refresh);\r\nwindow.shared.pubsub.on('commentsUpdate', refresh);\r\nwindow.shared.pubsub.on('postUpdate', refresh);\n\n\n// WEBPACK FOOTER //\n// ./src/js/moderate.js","/**\n * Returns a function, that, as long as it continues to be invoked, will not\n * be triggered. The function will be called after it stops being called for\n * N milliseconds. If `immediate` is passed, trigger the function on the\n * leading edge, instead of the trailing. The function also has a property 'clear' \n * that is a function which will clear the timer to prevent previously scheduled executions. \n *\n * @source underscore.js\n * @see http://unscriptable.com/2009/03/20/debouncing-javascript-methods/\n * @param {Function} function to wrap\n * @param {Number} timeout in ms (`100`)\n * @param {Boolean} whether to execute at the beginning (`false`)\n * @api public\n */\n\nmodule.exports = function debounce(func, wait, immediate){\n  var timeout, args, context, timestamp, result;\n  if (null == wait) wait = 100;\n\n  function later() {\n    var last = Date.now() - timestamp;\n\n    if (last < wait && last >= 0) {\n      timeout = setTimeout(later, wait - last);\n    } else {\n      timeout = null;\n      if (!immediate) {\n        result = func.apply(context, args);\n        context = args = null;\n      }\n    }\n  };\n\n  var debounced = function(){\n    context = this;\n    args = arguments;\n    timestamp = Date.now();\n    var callNow = immediate && !timeout;\n    if (!timeout) timeout = setTimeout(later, wait);\n    if (callNow) {\n      result = func.apply(context, args);\n      context = args = null;\n    }\n\n    return result;\n  };\n\n  debounced.clear = function() {\n    if (timeout) {\n      clearTimeout(timeout);\n      timeout = null;\n    }\n  };\n  \n  debounced.flush = function() {\n    if (timeout) {\n      result = func.apply(context, args);\n      context = args = null;\n      \n      clearTimeout(timeout);\n      timeout = null;\n    }\n  };\n\n  return debounced;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/debounce/index.js\n// module id = 18\n// module chunks = 0 1","/**\r\n * Copyright 2018-present, Facebook, Inc.\r\n * All rights reserved.\r\n *\r\n * This source code is licensed under the license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n */\r\n\r\nmodule.exports = function (window) {\r\n  window.addEventListener('DOMContentLoaded', () => {\r\n    // Bluetooth Clickers (like for cameras, CamKix, Selfie Button, etc.)\r\n    window.addEventListener('keydown', (e) => {\r\n      if (e.key === 'AudioVolumeUp') {\r\n        window.shared.pubsub.emit('teleprompterRefresh');\r\n        e.preventDefault();\r\n      }\r\n    });\r\n    \r\n    // Teleprompter View Modifiers\r\n    document.querySelector('[data-action=\"zoomUp\"]').addEventListener('click', (e) => {\r\n      window.shared.config.zoom += 0.1;\r\n      window.shared.pubsub.emit('configUpdate');\r\n    });\r\n    document.querySelector('[data-action=\"zoomDown\"]').addEventListener('click', (e) => {\r\n      window.shared.config.zoom -= 0.1;\r\n      window.shared.pubsub.emit('configUpdate');\r\n    });\r\n    \r\n    document.querySelector('[data-action=\"flipHorizontal\"]').addEventListener('click', (e) => {\r\n      window.shared.config.flipHorizontal = !window.shared.config.flipHorizontal;\r\n      window.shared.pubsub.emit('configUpdate');\r\n    });\r\n    document.querySelector('[data-action=\"flipVertical\"]').addEventListener('click', (e) => {\r\n      window.shared.config.flipVertical = !window.shared.config.flipVertical;\r\n      window.shared.pubsub.emit('configUpdate');\r\n    });\r\n  });\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/js/CommonControls.js"],"sourceRoot":""}